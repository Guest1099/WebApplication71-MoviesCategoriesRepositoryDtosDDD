@model GetMovieDto

<div class="dodawanieHeader">
    <span class="titleHeader">Edytowaine istniejącej pozycji</span>
</div>  
<hr />



<form method="post" asp-action="Edit" asp-controller="Movies" enctype="multipart/form-data">
    <input type="hidden" asp-for="MovieId" />
    <input type="hidden" asp-for="Files" />


    <table>
        <tr>
            <td class="leftColumn">
                <label asp-for="Title"></label>
            </td>
            <td class="rightColumn">
                <div class="db">
                    <input asp-for="Title" />
                    <span asp-validation-for="Title" class="c-red"></span>
                </div>
            </td>
        </tr>
        <tr>
            <td class="leftColumn">
                <label asp-for="Description"></label>
            </td>
            <td class="rightColumn">
                <div class="db">
                    <textarea asp-for="Description" class="textArea"></textarea>
                    <span asp-validation-for="Description" class="c-red"></span>
                </div>
            </td>
        </tr>
        <tr>
            <td class="leftColumn">
                <label asp-for="Price"></label>
            </td>
            <td class="rightColumn">
                <div class="db">
                    <input asp-for="Price" />
                    <span asp-validation-for="Price" class="c-red"></span>
                </div>
            </td>
        </tr>
        <tr>
            <td class="leftColumn">
                <label asp-for="CategoryId">Kategoria</label>
            </td>
            <td class="rightColumn">
                <div class="db">
                    <select asp-for="CategoryId" asp-items="Model.CategoriesList" class="w-200px form-input2"></select>
                    <span asp-validation-for="CategoryId" class="c-red"></span>
                </div>
            </td>
        </tr>
        @if (Model.PhotosMovie != null && Model.PhotosMovie.Any())
        {
            <tr>
                <td>
                    Zdjęcia
                </td>
                <td>
                    <div class="db"> 
                        @foreach (var photoMovie in Model.PhotosMovie)
                        {
                            <div class="image w-200px">
                                <partial name="_displayPhoto" model="@photoMovie.PhotoData" />
                            </div>

                            <a asp-action="DeletePhotoMovie"
                               asp-controller="Movies"
                               asp-route-movieId="@photoMovie.MovieId"
                                       asp-route-photoMovieId="@photoMovie.PhotoMovieId">
                                Usuń zdjęcie
                            </a>
                        }
                    </div>
                </td>
            </tr> 
        }
        <tr>
            <td class="leftColumn">
                <span>Dodaj zdjęcie</span>
            </td>
            <td class="rightColumn">
                <div class="db fieldEdit">
                    <div id="imageContainer" class="db"></div>
                    <input id="files" asp-for="Files" accept="image/*" multiple onchange="saveFiles();" />
                </div>
            </td>
        </tr>

    </table>


    <div class="w-100 df-sb mt-30 mb-40">
        <a asp-action="Index" asp-controller="Movies" class="buttonWstecz w-100px" onclick="clearSession();">Wstecz</a>
        <div class="df">
            <input type="submit" value="Zapisz" class="buttonEdit w-100px"  onclick="clearSession();" />
            <a asp-action="Index" asp-controller="Movies" class="buttonAnuluj w-100px ml-2" onclick="clearSession();">Anuluj</a>
        </div>
    </div>
</form>




<!-- Zwraca komunikat błędu, o ile takowy się pojawi -->
<span class="c-red">@ViewData["ErrorMessage"]</span>





